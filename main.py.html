<html>
<head>
<title>main.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #808080;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
main.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">streamlit </span><span class="s0">as </span><span class="s1">st</span>
<span class="s0">import </span><span class="s1">numpy </span><span class="s0">as </span><span class="s1">np</span>
<span class="s0">import </span><span class="s1">matplotlib.pyplot </span><span class="s0">as </span><span class="s1">plt</span>
<span class="s0">import </span><span class="s1">time</span>

<span class="s2"># Streamlit app title</span>
<span class="s1">st.title(</span><span class="s3">&quot;Climate-Based HAAY AWG System Simulation&quot;</span><span class="s1">)</span>

<span class="s2"># Interactive temperature and humidity sliders for user input</span>
<span class="s1">temperature = st.slider(</span><span class="s3">&quot;Adjust Temperature (Â°C)&quot;</span><span class="s0">, </span><span class="s1">min_value=-</span><span class="s4">10</span><span class="s0">, </span><span class="s1">max_value=</span><span class="s4">50</span><span class="s0">, </span><span class="s1">value=</span><span class="s4">25</span><span class="s1">)</span>
<span class="s1">humidity = st.slider(</span><span class="s3">&quot;Adjust Humidity (%)&quot;</span><span class="s0">, </span><span class="s1">min_value=</span><span class="s4">0</span><span class="s0">, </span><span class="s1">max_value=</span><span class="s4">100</span><span class="s0">, </span><span class="s1">value=</span><span class="s4">50</span><span class="s1">)</span>

<span class="s2"># Determine activated system based on temperature and humidity values with more detailed conditions</span>
<span class="s0">if </span><span class="s1">temperature &gt; </span><span class="s4">35 </span><span class="s0">and </span><span class="s1">humidity &lt; </span><span class="s4">30</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Advanced Desiccant System with High Solar Power&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;This system extracts moisture using an advanced desiccant process with optimized solar power &quot;</span>
                   <span class="s3">&quot;to handle extremely high temperatures and low humidity.&quot;</span><span class="s1">)</span>
<span class="s0">elif </span><span class="s4">30 </span><span class="s1">&lt; temperature &lt;= </span><span class="s4">35 </span><span class="s0">and </span><span class="s4">20 </span><span class="s1">&lt;= humidity &lt; </span><span class="s4">50</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Hybrid Desiccant and Cooling System&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;Combines desiccant and active cooling to maintain efficiency in high temperatures and moderate humidity.&quot;</span><span class="s1">)</span>
<span class="s0">elif </span><span class="s4">25 </span><span class="s1">&lt;= temperature &lt;= </span><span class="s4">35 </span><span class="s0">and </span><span class="s4">50 </span><span class="s1">&lt;= humidity &lt;= </span><span class="s4">80</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Full Cooling System, High Fan Speed, Renewable Energy&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;A full cooling system is engaged with high fan speed for efficient water condensation in warm, humid conditions.&quot;</span><span class="s1">)</span>
<span class="s0">elif </span><span class="s4">20 </span><span class="s1">&lt;= temperature &lt; </span><span class="s4">30 </span><span class="s0">and </span><span class="s4">30 </span><span class="s1">&lt;= humidity &lt; </span><span class="s4">60</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Standard Cooling Plates, Optimal Fan Speed&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;Standard cooling plates operate at optimal fan speed to provide efficient water extraction under moderate conditions.&quot;</span><span class="s1">)</span>
<span class="s0">elif </span><span class="s4">10 </span><span class="s1">&lt;= temperature &lt; </span><span class="s4">25 </span><span class="s0">and </span><span class="s4">20 </span><span class="s1">&lt;= humidity &lt; </span><span class="s4">40</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Energy-Saving Cooling Mode&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;An energy-saving mode activates with moderate cooling and reduced fan speed for balanced energy usage.&quot;</span><span class="s1">)</span>
<span class="s0">elif </span><span class="s4">5 </span><span class="s1">&lt;= temperature &lt; </span><span class="s4">20 </span><span class="s0">and </span><span class="s4">10 </span><span class="s1">&lt;= humidity &lt; </span><span class="s4">30</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Pre-Heating and Low-Power Desiccant System&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;Pre-heating technology prevents frost, and a low-power desiccant system helps maintain water extraction in cooler, drier air.&quot;</span><span class="s1">)</span>
<span class="s0">elif </span><span class="s1">temperature &lt; </span><span class="s4">10 </span><span class="s0">and </span><span class="s1">humidity &gt;= </span><span class="s4">30</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Pre-Heating with Moderate Cooling Plates&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;Pre-heating is combined with moderate cooling plates to prevent frost and ensure functionality in cold, moist air.&quot;</span><span class="s1">)</span>
<span class="s0">elif </span><span class="s1">temperature &lt; </span><span class="s4">0 </span><span class="s0">and </span><span class="s1">humidity &lt; </span><span class="s4">20</span><span class="s1">:</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: Extreme Pre-Heating and High-Efficiency Desiccant System&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;An extreme pre-heating system is engaged, along with a high-efficiency desiccant process, for very cold and dry climates.&quot;</span><span class="s1">)</span>
<span class="s0">else</span><span class="s1">:</span>
    <span class="s2"># Expanded fallback to minimize standby</span>
    <span class="s1">system_status = </span><span class="s3">&quot;Activated: General Climate Adaptation Mode&quot;</span>
    <span class="s1">system_info = (</span><span class="s3">&quot;This general mode adapts dynamically to various conditions, ensuring basic water extraction at suboptimal settings.&quot;</span><span class="s1">)</span>

<span class="s2"># Display the current activated system and its function</span>
<span class="s1">st.subheader(</span><span class="s3">&quot;System Status:&quot;</span><span class="s1">)</span>
<span class="s1">st.write(system_status)</span>
<span class="s1">st.write(</span><span class="s3">f&quot;**What this setting does:** </span><span class="s0">{</span><span class="s1">system_info</span><span class="s0">}</span><span class="s3">&quot;</span><span class="s1">)</span>

<span class="s2"># Animation settings (fixed settings for demonstration)</span>
<span class="s1">iterations = </span><span class="s4">16  </span><span class="s2"># Level of detail for fractal</span>
<span class="s1">separation = </span><span class="s4">0.7885  </span><span class="s2"># Separation factor for animation</span>

<span class="s2"># Create progress bar and placeholders for animation</span>
<span class="s1">progress_bar = st.sidebar.progress(</span><span class="s4">0</span><span class="s1">)</span>
<span class="s1">frame_text = st.sidebar.empty()</span>
<span class="s1">image = st.empty()</span>


<span class="s2"># Fractal animation function</span>
<span class="s0">def </span><span class="s1">generate_fractal(iterations</span><span class="s0">, </span><span class="s1">separation</span><span class="s0">, </span><span class="s1">frame_num</span><span class="s0">, </span><span class="s1">m=</span><span class="s4">960</span><span class="s0">, </span><span class="s1">n=</span><span class="s4">640</span><span class="s0">, </span><span class="s1">s=</span><span class="s4">400</span><span class="s1">):</span>
    <span class="s1">x = np.linspace(-m / s</span><span class="s0">, </span><span class="s1">m / s</span><span class="s0">, </span><span class="s1">num=m).reshape((</span><span class="s4">1</span><span class="s0">, </span><span class="s1">m))</span>
    <span class="s1">y = np.linspace(-n / s</span><span class="s0">, </span><span class="s1">n / s</span><span class="s0">, </span><span class="s1">num=n).reshape((n</span><span class="s0">, </span><span class="s4">1</span><span class="s1">))</span>
    <span class="s1">a = frame_num * </span><span class="s4">0.1</span>
    <span class="s1">c = separation * np.exp(</span><span class="s4">1j </span><span class="s1">* a)</span>
    <span class="s1">Z = np.tile(x</span><span class="s0">, </span><span class="s1">(n</span><span class="s0">, </span><span class="s4">1</span><span class="s1">)) + </span><span class="s4">1j </span><span class="s1">* np.tile(y</span><span class="s0">, </span><span class="s1">(</span><span class="s4">1</span><span class="s0">, </span><span class="s1">m))</span>
    <span class="s1">C = np.full((n</span><span class="s0">, </span><span class="s1">m)</span><span class="s0">, </span><span class="s1">c)</span>
    <span class="s1">M = np.full((n</span><span class="s0">, </span><span class="s1">m)</span><span class="s0">, True, </span><span class="s1">dtype=bool)</span>
    <span class="s1">N = np.zeros((n</span><span class="s0">, </span><span class="s1">m))</span>
    <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(iterations):</span>
        <span class="s1">Z[M] = Z[M] * Z[M] + C[M]</span>
        <span class="s1">M[np.abs(Z) &gt; </span><span class="s4">2</span><span class="s1">] = </span><span class="s0">False</span>
        <span class="s1">N[M] = i</span>
    <span class="s0">return </span><span class="s4">1.0 </span><span class="s1">- (N / N.max())</span>


<span class="s2"># Animation loop with original color scheme</span>
<span class="s0">for </span><span class="s1">frame_num </span><span class="s0">in </span><span class="s1">range(</span><span class="s4">100</span><span class="s1">):</span>
    <span class="s1">fractal_image = generate_fractal(iterations</span><span class="s0">, </span><span class="s1">separation</span><span class="s0">, </span><span class="s1">frame_num)</span>

    <span class="s2"># Display the fractal image without a specific color map for a classic look</span>
    <span class="s1">fig</span><span class="s0">, </span><span class="s1">ax = plt.subplots()</span>
    <span class="s1">ax.imshow(fractal_image</span><span class="s0">, </span><span class="s1">cmap=</span><span class="s3">'gray'</span><span class="s0">, </span><span class="s1">interpolation=</span><span class="s3">'none'</span><span class="s1">)  </span><span class="s2"># Original grayscale color map</span>
    <span class="s1">ax.axis(</span><span class="s3">'off'</span><span class="s1">)  </span><span class="s2"># Hide the axes for a clean look</span>
    <span class="s1">image.pyplot(fig</span><span class="s0">, </span><span class="s1">use_container_width=</span><span class="s0">True</span><span class="s1">)</span>

    <span class="s2"># Update progress and frame text</span>
    <span class="s1">frame_text.text(</span><span class="s3">f&quot;Frame </span><span class="s0">{</span><span class="s1">frame_num + </span><span class="s4">1</span><span class="s0">}</span><span class="s3">/100&quot;</span><span class="s1">)</span>
    <span class="s1">progress_bar.progress(frame_num + </span><span class="s4">1</span><span class="s1">)</span>
    <span class="s1">time.sleep(</span><span class="s4">0.05</span><span class="s1">)  </span><span class="s2"># Delay for animation speed</span>

<span class="s2"># Clear the progress bar and frame text after animation</span>
<span class="s1">progress_bar.empty()</span>
<span class="s1">frame_text.empty()</span>

<span class="s2"># Rerun button</span>
<span class="s1">st.button(</span><span class="s3">&quot;Rerun&quot;</span><span class="s1">)</span>






</pre>
</body>
</html>